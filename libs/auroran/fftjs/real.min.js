if(!FFT)var FFT={};!function(r){"use strict";function e(r,e,t,a,s,o,i,f,n,c){for(var h=f/2,l=f/i,v=i/2,w=0;w<l;w++){var u=(I=v*w)+h,d=a[s+o*I],g=a[s+o*u],b=d+g,p=d-g;u=(I=i*w)+i-1;r[e+t*I]=b,r[e+t*u]=p}if(1!=v){for(w=0;w<v/2;w++)for(var F=n[2*(-1+w)],y=n[2*(-1+w)+1],k=0;k<l;k++){u=(I=k*v+2*w-1)+h;var M=a[2*(s+o*I)],A=a[2*(s+o*I)+1],B=a[2*(s+o*u)],E=a[2*(s+o*u)+1],R=B*F-E*y,T=B*y+E*F,S=M+R,m=A+T,q=M-R;P=-(P=A-T);u=(k-1)*i-2*w-1;r[2*(e+t*(I=k*i+2*w-1))]=S,r[2*(e+t*I)+1]=m,r[2*(e+t*u)]=q,r[2*(e+t*u)+1]=P}if(v%2!=1)for(w=0;w<l;w++){u=(I=(w+1)*v-1)+h,S=a[2*(s+o*I)];var I,P=-a[2*(s+o*u)];r[2*(e+t*(I=w*i+v-1))]=S,r[2*(e+t*I)+1]=m}}}function t(r,e,t,a,s,o,i,f,n,c){for(var h=f/2,l=f/i,v=i/2,w=0;w<l;w++){var u=(2*w+2)*l-1,d=a[s+o*(P=2*w*l)],g=a[s+o*u],b=d+g,p=d-g;u=l*w+h;r[e+t*(P=l*w)]=b,r[e+t*u]=p}if(1!=l){for(w=0;w<l/2;w++)for(var F=n[2*(-1+w)],y=n[2*(-1+w)+1],k=0;k<v;k++){u=2*(k+1)*l-2*w-1;var M=a[2*(s+o*(P=2*k*l+2*w-1))],A=a[2*(s+o*P)+1],B=a[2*(s+o*u)],E=a[2*(s+o*u)+1],R=M+B,T=A-E,S=M-B,m=A+E,q=S*F-m*y,I=S*y+m*F;u=(P=k*l+2*w-1)+h;r[2*(e+t*P)]=R,r[2*(e+t*P)+1]=T,r[2*(e+t*u)]=q,r[2*(e+t*u)+1]=I}if(l%2!=1)for(w=0;w<l;w++){var P;R=a[2*(s+o*(P=2*(w+1)*l-1))],T=a[2*(s+o*P)+1];a[2*(s+o*P)]=2*R,a[2*(s+o*u)+1]=-2*T}}}var a=function(r,e){e=!!e;if((r=~~r)<1)throw new RangeError("n is outside range, should be positive integer, was `"+r+"'");for(var t={n:r,inverse:e,factors:[],twiddle:[],scratch:new Float64Array(r)},a=new Float64Array(r),s=4,o=Math.floor(Math.sqrt(r));r>1;){for(;r%s;){switch(s){case 4:s=2;break;case 2:s=3;break;default:s+=2}s>o&&(s=r)}r/=s,t.factors.push(s)}var i=2*Math.PI/r,f=1,n=new Float64Array(r),c=0;for(a=0;c<t.factors.length;c++){var h=i*c,l=t.factors[c],v=f,w=r/(f=f*l);if(t.twiddle.push(new Float64Array(n,a)),e)var u=w,d=v;else u=v,d=w;for(var g=1;g<l;g++)for(var b=0,p=1;p<u/2;p++,a++){h=i*(b=(b+g*d)%r);a[2*c]=Math.cos(h),a[2*c+1]=Math.sin(h)}}this.state=t};a.prototype.process=function(r,a,s,o){o=~~o;if((a=~~a)<1)throw new RangeError("outputStride is outside range, should be positive integer, was `"+a+"'");if(o<1)throw new RangeError("inputStride is outside range, should be positive integer, was `"+o+"'");for(var i=1,f=0,n=this.state.inverse,c=this.state.n,h=this.state.factors,l=this.state.twiddle,v=this.state.scratch,w=0;w<h.length;w++){var u=h[w],d=i,g=(i=i*u,Math.ceil(d/2)-1);if(0==f){var b=s,p=o;if(this.state.factors.length%2==0){var F=v,y=1;f=1}else F=r,y=a,f=2}else if(1==f)b=v,p=1,F=r,y=a,f=2;else{if(2!=f)throw new RangeError("state somehow is not in the range (0 .. 2)");b=r,p=a,F=v,y=1,f=1}if(n)switch(u){case 2:t(F,0,y,b,0,p,i,c,l[w]);break;case 3:case 4:case 5:backwardButterfly3(F,0,y,b,0,p,i,c,l[w],g);break;default:backwardButterfly(F,0,y,b,0,p,i,c,l[w],g)}else switch(u){case 2:e(F,0,y,b,0,p,i,c,l[w]);break;case 3:case 4:case 5:forwardButterfly3(F,0,y,b,0,p,i,c,l[w],g);break;default:forwardButterfly(F,0,y,b,0,p,i,c,l[w],g)}}},r.real=a}(FFT);
